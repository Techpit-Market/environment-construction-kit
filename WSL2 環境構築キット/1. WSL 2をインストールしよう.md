>ここではWindowsでの開発環境の構築のためにWSL 2のインストール手順を記載しています。
>
>教材を作成するに当たって必要であれば説明を付け加えてください。
>
>ここから教材
# WSL 2をインストールしよう
この章ではWindows10上で開発環境を構築するために必要な**WSL(Windows Subsystem for Linux)** というシステムをインストールします。

WSLとはLinux環境をWindows10上で直接実行できるようにするためのシステムです。

今回は2021年8月現在で最新のバージョンであるWSL 2をインストールします。

## PowerShellの起動
コマンドでWindowsの操作をするためのツールにコマンドプロンプトというものがありますが、WSL 2のインストールではコマンドプロンプトよりも高機能な**PowerShell**というツールを使用します。

PowerShellは最新のWindows10では最初からインストールされています。

それではPowerShellを起動してみましょう。

画面左下の「Windowsロゴ」を**右**クリックしてください。

<img src="https://user-images.githubusercontent.com/25563739/128489901-d56b92bd-4c0d-4863-907b-173326c0ad56.png" width="800">

以下のようにメニューが表示されるので、「Windows PowerShell（管理者）」をクリックしてください。

<img src="https://user-images.githubusercontent.com/25563739/128489905-b96620fd-3b20-45aa-9726-c8a63e43740a.png" width="300">

管理者特権のアクセス許可を求めるメッセージが表示されるので、「はい」をクリックしてください。

以下のようなウインドウが表示されれば成功です。

<img src="https://user-images.githubusercontent.com/25563739/128489906-3ceb494f-b8c1-4a2e-b325-e2456c4e7313.png" width="700">

## 仮想マシンの機能を有効にする
WSL 2の実行を許可するための設定をおこないます。

PowerShellで以下のコマンドを実行してください。

```console
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```

以下のようなメッセージが表示されれば成功です。

```
展開イメージのサービスと管理ツール
バージョン: 10.0.19041.844

イメージのバージョン: 10.0.19042.985

機能を有効にしています
[==========================100.0%==========================]
操作は正常に完了しました。
```

## Linuxカーネル更新プログラムパッケージをダウンロードする

続いて、Linuxカーネル更新プログラムパッケージをダウンロードします。

以下のリンクをクリックして、WSLの公式ドキュメントのページへ移動してください。

- [Windows 10 に WSL をインストールする | Microsoft Docs](https://docs.microsoft.com/ja-jp/windows/wsl/install-win10#step-4---download-the-linux-kernel-update-package)

以下の赤線で示したリンクをクリックすると、`wsl_update_x64.msi`というファイルのダウンロードが始まります。

<img src="https://user-images.githubusercontent.com/25563739/128489911-09e3b160-d528-4377-a18f-3e4295218ca9.png" width="1000">

::: warn
以下の通り、**ARM64**マシンを使用している場合は、ARM64パッケージをダウンロードする必要があります。

<img src="https://user-images.githubusercontent.com/25563739/128489915-2a1ba3e9-8096-43f1-8d58-ab131b80a28d.png" width="1000">

確認方法に、`systeminfo | find "System Type"`コマンドの実行が示されていますが、日本語環境の場合、何も出力されないので、`systeminfo`コマンドを実行して、「システムの種類」という項目を探してください。

<img src="https://user-images.githubusercontent.com/25563739/128489918-5759bc1e-1bc6-44d7-b2c1-e68221e60ce9.png" width="800">

`x64-based PC`のように`x64`とあれば、**ARM64ではありません**ので、通常のパッケージをダウンロードしてください。
:::

続いてダウンロードしたファイルを開くとインストールが始まります。

ファイルを開くと以下のようなエラーが発生する場合があります。

<img src="https://user-images.githubusercontent.com/25563739/128489922-eb3af46e-f2b0-40dc-820e-49743bd07838.png" width="400">

上記のエラーが発生した場合は、以下の設定をおこなってください。

タスクバーの検索窓に「Windows」と入力すると、「Windowsの機能の有効化または無効化」という検索結果が表示されるので、これを開きます。

<img src="https://user-images.githubusercontent.com/25563739/128489924-8bb996e9-ba5f-4a2b-8eed-50beb212caac.png" width="700">

以下のようなウインドウが開きます。

<img src="https://user-images.githubusercontent.com/25563739/128489926-04c86ed7-a6e8-4c3e-abcc-275df5b486e4.png" width="500">

以下のように「Linux用Windowsサブシステム」のチェックボックスを有効にして「OK」をクリックしてください。

<img src="https://user-images.githubusercontent.com/25563739/128489929-e6861b5a-8805-4b02-94b8-4c8ba6c81ba0.png" width="500">

機能を有効にするために、一度PCを再起動してください。

再起動できたら、もう一度、先ほどダウンロードしたファイルを開いてください。

以下のようなウインドウが開くので、「Next」ボタンをクリックし、インストールを開始してください。

<img src="https://user-images.githubusercontent.com/25563739/128489931-a8779a3a-039e-4aff-aad9-f4e6f3c962f6.png" width="600">

インストールが終わると、以下のような画面が表示されるので、「Finish」をクリックしてインストーラーを終了してください。

<img src="https://user-images.githubusercontent.com/25563739/128489934-28911fac-45de-41c1-8329-6793b7b13e7c.png" width="600">

以上でWSL 2のインストールは完了です。

次のパートでは代表的なLinuxディストリビューションのひとつであるUbuntuをインストールします。

お疲れさまでした。
