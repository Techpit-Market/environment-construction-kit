# WSL 2をインストールしよう
この章ではWindows10上で開発環境を構築するために必要な**WSL(Windows Subsystem for Linux)**というシステムをインストールします。

WSLとはLinux環境をWindows10上で直接実行できるようにするためのシステムです。

今回は2021年8月現在で最新のバージョンであるWSL 2をインストールします。

## PowerShellの起動
コマンドでWindowsの操作をするためのツールにコマンドプロンプトというものがありますが、WSL 2のインストールではコマンドプロンプトよりも高機能な**PowerShell**というツールを使用します。

PowerShellは最新のWindows10では最初からインストールされています。

それではPowerShellを起動してみましょう。

画面左下の「Windowsロゴ」を**右**クリックしてください。

[画像1]

以下のようにメニューが表示されます。

[画像2]

「Windows PowerShell（管理者）」をクリックしてください。

管理者特権のアクセス許可を求めるメッセージが表示されるので、「はい」をクリックしてください。

以下のようなウインドウが表示されれば成功です。

[画像4]

## 仮想マシンの機能を有効にする
WSL 2の実行を許可するための設定をおこないます。

PowerShellで以下のコマンドを実行してください。

```console
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```

以下のようなメッセージが表示されれば成功です。

```
展開イメージのサービスと管理ツール
バージョン: 10.0.19041.844

イメージのバージョン: 10.0.19042.985

機能を有効にしています
[==========================100.0%==========================]
操作は正常に完了しました。
```

## Linuxカーネル更新プログラムパッケージをダウンロードする

続いて、Linuxカーネル更新プログラムパッケージをダウンロードします。

以下のリンクをクリックして、WSLの公式ドキュメントのページへ移動してください。

- [Windows 10 に WSL をインストールする | Microsoft Docs](https://docs.microsoft.com/ja-jp/windows/wsl/install-win10#step-4---download-the-linux-kernel-update-package)

以下の赤線で示したリンクをクリックすると、`wsl_update_x64.msi`というファイルのダウンロードが始まります。

[画像5]

::: warn
以下の通り、**ARM64**マシンを使用している場合は、ARM64パッケージをダウンロードする必要があります。

[画像6]

確認方法に、`systeminfo | find "System Type"`コマンドの実行が示されていますが、日本語環境の場合、何も出力されないので、`systeminfo`コマンドを実行して、「システムの種類」という項目を探してください。

[画像7]

`x64-based PC`のように`x64`とあれば、**ARM64ではありません**ので、通常のパッケージをダウンロードしてください。
:::

続いてダウンロードしたファイルを開くとインストールが始まります。

ファイルを開くと以下のようなエラーが発生する場合があります。

[画像8]

上記のエラーが発生した場合は、タスクバーの検索窓に「Windows」と入力すると、「Windowsの機能の有効化または無効化」という検索結果が表示されるので、これを開きます。

[画像9-0]

以下のようなウインドウが開きます。

[画像9-1]

以下のように「Linux用Windowsサブシステム」のチェックボックスを有効にして「OK」をクリックしてください。

[画像9-2]

機能を有効にするために、一度PCを再起動してください。

再起動できたら、もう一度、先ほどダウンロードしたファイルを開いてください。

以下のようなウインドウが開くので、「Next」ボタンをクリックし、インストールを開始してください。

[画像10]

インストールが終わると、以下のような画面が表示されるので、「Finish」をクリックしてインストーラーを終了してください。

[画像11]

以上でWSL 2のインストールは完了です。

次のパートでは代表的なLinuxディストリビューションのひとつであるUbuntuをインストールします。

お疲れさまでした。
